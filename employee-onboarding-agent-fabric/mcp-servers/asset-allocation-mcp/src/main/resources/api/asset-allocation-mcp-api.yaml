#%RAML 1.0
title: Asset Allocation MCP Server API
version: v1.0.2
baseUri: https://asset-allocation-mcp.cloudhub.io/api
description: |
  The Asset Allocation MCP (Model Context Protocol) Server provides intelligent IT asset management capabilities for employee onboarding processes. This API enables automated allocation, tracking, and management of company assets such as laptops, ID cards, and other equipment.

  Key Features:
  - Automated asset allocation during employee onboarding
  - Real-time asset availability tracking  
  - Multi-database support (PostgreSQL, H2, Mock mode)
  - Intelligent fallback strategies for high availability
  - Comprehensive health monitoring and status reporting
  - RESTful API design with JSON responses

mediaType: application/json

documentation:
  - title: Getting Started
    content: |
      ## Authentication
      This API currently uses basic authentication or API key authentication depending on deployment.
      
      ## Base URL
      - Development: http://localhost:8082
      - Production: https://asset-allocation-mcp.cloudhub.io
      
      ## Rate Limiting  
      Standard rate limiting applies: 1000 requests per hour per client.

types:
  Employee:
    type: object
    properties:
      employeeId: string
      firstName: string
      lastName: string
      department?: string
      position?: string
    example:
      employeeId: "EMP001"
      firstName: "John"
      lastName: "Doe"
      department: "Engineering"
      position: "Software Developer"

  Asset:
    type: object
    properties:
      assetId: string
      assetTag: string
      assetName: string
      category: string
      brand: string
      model: string
      serialNumber: string
      condition: string
      status: string
      allocationDate?: string
    example:
      assetId: "AST001"
      assetTag: "LAP-001"
      assetName: "Dell Latitude 5520"
      category: "LAPTOP"
      brand: "Dell"
      model: "Latitude 5520"
      serialNumber: "DL123456789"
      condition: "NEW"
      status: "AVAILABLE"

  AllocationRequest:
    type: object
    properties:
      employeeId: string
      firstName?: string
      lastName?: string
      department?: string
      position?: string
      assets?: string[]
    example:
      employeeId: "EMP001"
      firstName: "John"
      lastName: "Doe"
      department: "Engineering"
      assets: ["laptop", "id-card"]

  AllocationResponse:
    type: object
    properties:
      success: boolean
      message: string
      database: string
      employeeId: string
      employeeName: string
      allocatedAssets: Asset[]
      allocationCount: integer
      timestamp: string
      mockMode: boolean
    example:
      success: true
      message: "Assets allocated successfully"
      database: "h2"
      employeeId: "EMP001"
      employeeName: "John Doe"
      allocatedAssets:
        - assetId: "AST001"
          assetTag: "LAP-001"
          assetName: "Dell Latitude 5520"
          category: "LAPTOP"
          status: "ALLOCATED"
      allocationCount: 1
      timestamp: "2024-01-15 10:30:00"
      mockMode: false

  HealthStatus:
    type: object
    properties:
      status: string
      service: string
      version: string
      timestamp: string
      environment: string
      checks: object[]
      uptime: number
      features: object
    example:
      status: "HEALTHY"
      service: "Asset Allocation MCP Server"
      version: "1.0.2"
      timestamp: "2024-01-15T10:30:00Z"
      environment: "development"
      uptime: 3600
      features:
        mockMode: false
        databaseRequired: true

/health:
  displayName: Health Check
  description: Returns the current health status of the Asset Allocation MCP Server
  get:
    description: Get comprehensive health status including database connectivity, application state, and configuration details
    responses:
      200:
        description: Service is healthy
        body:
          type: HealthStatus
      503:
        description: Service is degraded or unhealthy
        body:
          type: object
          properties:
            status: string
            message: string
          example:
            status: "DEGRADED"
            message: "Database connection failed"

/mcp:
  /info:
    displayName: MCP Server Information
    description: Returns detailed information about the MCP server capabilities and available tools
    get:
      description: Get MCP server metadata, capabilities, and tool definitions
      responses:
        200:
          description: MCP server information
          body:
            type: object
            properties:
              name: string
              version: string
              description: string
              baseUrl: string
              environment: string
              capabilities: object
              endpoints: object
              tools: object[]

  /tools:
    displayName: MCP Tools
    description: Asset allocation and management tools
    
    /allocate-assets:
      displayName: Allocate Assets
      description: Allocate one or more assets to an employee during onboarding
      post:
        description: |
          Allocates available assets to the specified employee. The system will:
          1. Validate employee information
          2. Find available assets matching the requested types
          3. Update asset status to 'ALLOCATED'
          4. Create allocation records
          5. Return detailed allocation results
        body:
          type: AllocationRequest
        responses:
          200:
            description: Assets allocated successfully
            body:
              type: AllocationResponse
          400:
            description: Invalid request parameters
            body:
              type: object
              properties:
                success: boolean
                error: string
                message: string
              example:
                success: false
                error: "INVALID_REQUEST"
                message: "Employee ID is required"
          404:
            description: No available assets found
            body:
              type: object
              properties:
                success: boolean
                error: string
                message: string
                availableAssets: Asset[]

    /return-asset:
      displayName: Return Asset
      description: Return an allocated asset and make it available for reassignment
      post:
        description: |
          Returns a previously allocated asset to available status. The system will:
          1. Validate asset tag
          2. Update asset status to 'AVAILABLE'
          3. Record return details and condition
          4. Update allocation history
        body:
          type: object
          properties:
            assetTag: string
            condition?: string
            notes?: string
          example:
            assetTag: "LAP-001"
            condition: "GOOD"
            notes: "Asset returned in good condition"
        responses:
          200:
            description: Asset returned successfully
            body:
              type: object
              properties:
                success: boolean
                message: string
                assetTag: string
                condition: string
                returnDate: string
                timestamp: string

    /list-assets:
      displayName: List Assets
      description: Retrieve a list of assets with optional filtering
      get:
        description: |
          Returns a paginated list of assets with optional filters:
          - Status filter: AVAILABLE, ALLOCATED, MAINTENANCE, RETIRED
          - Category filter: LAPTOP, ID_CARD, PHONE, etc.
        queryParameters:
          status?:
            type: string
            enum: [AVAILABLE, ALLOCATED, MAINTENANCE, RETIRED]
            description: Filter by asset status
          category?:
            type: string
            description: Filter by asset category
        responses:
          200:
            description: Assets retrieved successfully
            body:
              type: object
              properties:
                success: boolean
                message: string
                database: string
                assets: Asset[]
                assetCount: integer
                statistics: object
                timestamp: string
                mockMode: boolean

    /get-available-assets:
      displayName: Get Available Assets
      description: Retrieve all assets currently available for allocation
      get:
        description: Returns only assets with 'AVAILABLE' status, ready for allocation to employees
        responses:
          200:
            description: Available assets retrieved successfully
            body:
              type: object
              properties:
                success: boolean
                message: string
                database: string
                assets: Asset[]
                assetCount: integer
                categories: string[]
                timestamp: string

    /get-employee-assets:
      displayName: Get Employee Assets
      description: Retrieve all assets allocated to a specific employee
      post:
        description: Returns all currently allocated assets for the specified employee
        body:
          type: object
          properties:
            employeeId: string
          example:
            employeeId: "EMP001"
        responses:
          200:
            description: Employee assets retrieved successfully
            body:
              type: object
              properties:
                success: boolean
                message: string
                database: string
                employeeId: string
                assets: Asset[]
                assetCount: integer
                categories: string[]
                timestamp: string
          404:
            description: Employee not found or no assets allocated
            body:
              type: object
              properties:
                success: boolean
                error: string
                message: string
                employeeId: string
