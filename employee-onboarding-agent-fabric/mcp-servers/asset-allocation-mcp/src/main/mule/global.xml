<?xml version="1.0" encoding="UTF-8"?>
<mule xmlns:tls="http://www.mulesoft.org/schema/mule/tls"
	xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:apikit="http://www.mulesoft.org/schema/mule/mule-apikit"
	xmlns:db="http://www.mulesoft.org/schema/mule/db"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core"
	xmlns:http="http://www.mulesoft.org/schema/mule/http"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/tls http://www.mulesoft.org/schema/mule/tls/current/mule-tls.xsd 
        http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd 
        http://www.mulesoft.org/schema/mule/db http://www.mulesoft.org/schema/mule/db/current/mule-db.xsd 
        http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd 
        http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd 
        http://www.mulesoft.org/schema/mule/mule-apikit http://www.mulesoft.org/schema/mule/mule-apikit/current/mule-apikit.xsd">

	<!-- Configuration Properties -->
	<configuration-properties
		file="config.properties" doc:name="Configuration properties" />



	<http:listener-config name="HTTP_Listener_config"
		doc:name="HTTP Listener config">
		<http:listener-connection host="0.0.0.0"
			port="${https.port}" protocol="HTTPS">
			<tls:context name="tls-context">
				<tls:key-store type="jks" path="server.jks"
					keyPassword="MULEPASS" password="MULEPASS" alias="mule-server" />
			</tls:context>
		</http:listener-connection>
	</http:listener-config>


	<!-- H2 Database Configuration (Primary for CloudHub) -->
	<db:config doc:name="H2 Config" name="H2_Database_Config">
		<db:generic-connection
			driverClassName="${db.h2.driverClassName}"
			password="${db.h2.password}" url="${db.h2.url}"
			user="${db.h2.username}" />
	</db:config>

	<!-- PostgreSQL Database Configuration (For local Docker environment) -->
	<db:config doc:name="PostgreSQL Config"
		name="PostgreSQL_Database_Config">
		<db:generic-connection
			driverClassName="${db.postgres.driverClassName}"
			password="${db.postgres.password}" url="${db.postgres.url}"
			user="${db.postgres.username}" />
	</db:config>

	<!-- APIKit Configuration -->
	<apikit:config name="asset-allocation-mcp-api-config"
		api="api/asset-allocation-mcp-api.yaml"
		outboundHeadersMapName="outboundHeaders"
		httpStatusVarName="httpStatus" doc:name="APIKit Config" />

</mule>
